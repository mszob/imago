<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>qmk firmware | imago mundi</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" href="/images/favicon.svg">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@200&amp;display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&amp;display=swap">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="href=&quot;https://fonts.gstatic.com">
    <link rel="preconnect" href="script.ttf">
    <meta name="description" content="imago_mundi">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.91f4ee23.css" as="style"><link rel="preload" href="/assets/js/app.ae3c42d8.js" as="script"><link rel="preload" href="/assets/js/2.4a530985.js" as="script"><link rel="preload" href="/assets/js/15.b6da1766.js" as="script"><link rel="prefetch" href="/assets/js/10.473657fc.js"><link rel="prefetch" href="/assets/js/11.f24bad60.js"><link rel="prefetch" href="/assets/js/12.aff71c16.js"><link rel="prefetch" href="/assets/js/13.a9d4c7bc.js"><link rel="prefetch" href="/assets/js/14.5e8fd77c.js"><link rel="prefetch" href="/assets/js/16.5143364a.js"><link rel="prefetch" href="/assets/js/17.8affcb9b.js"><link rel="prefetch" href="/assets/js/18.ae4933d3.js"><link rel="prefetch" href="/assets/js/3.a69bff96.js"><link rel="prefetch" href="/assets/js/4.54317f72.js"><link rel="prefetch" href="/assets/js/5.187d9d25.js"><link rel="prefetch" href="/assets/js/6.a8e9dfde.js"><link rel="prefetch" href="/assets/js/7.0d948b14.js"><link rel="prefetch" href="/assets/js/8.7ade18ae.js"><link rel="prefetch" href="/assets/js/9.156c5d29.js">
    <link rel="stylesheet" href="/assets/css/0.styles.91f4ee23.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo4.svg" alt="imago mundi" class="logo"> <span class="site-name can-hide">imago mundi</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/writing/" class="nav-link router-link-active">
  writing tools
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/writing/" class="nav-link router-link-active">
  writing tools
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/writing/digital/" aria-current="page" class="sidebar-link">planck</a></li><li><a href="/writing/digital/keylayout.html" class="sidebar-link">key layout</a></li><li><a href="/writing/digital/keycaps.html" class="sidebar-link">keycaps</a></li><li><a href="/writing/digital/switches.html" class="sidebar-link">switches</a></li><li><a href="/writing/digital/firmware.html" aria-current="page" class="active sidebar-link">qmk firmware</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="qmk-firmware"><a href="#qmk-firmware" class="header-anchor">#</a> qmk firmware</h1> <h2 id="keymap-c"><a href="#keymap-c" class="header-anchor">#</a> keymap.c</h2> <p>The Planck is programmed according to my keylayout design using the QMK firmware. Below is the C file that is compiled and flashed onto the Planck's microcontroller usique the QMK Firmware.</p> <div class="language-c extra-class"><pre class="language-c"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token expression">QMK_KEYBOARD_H</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;quantum.h&quot;</span></span>

<span class="token keyword">enum</span> <span class="token punctuation">{</span>
	QMKBEST <span class="token operator">=</span> SAFE_RANGE<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token punctuation">{</span>
    SINGLE_TAP <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
    SINGLE_HOLD<span class="token punctuation">,</span>
    DOUBLE_TAP<span class="token punctuation">,</span>
    DOUBLE_HOLD<span class="token punctuation">,</span>
    DOUBLE_SINGLE_TAP<span class="token punctuation">,</span>
    TRIPLE_TAP<span class="token punctuation">,</span>
    TRIPLE_HOLD
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> <span class="token punctuation">{</span>
    SH<span class="token punctuation">,</span>
    SP<span class="token punctuation">,</span>
    QU<span class="token punctuation">,</span>
    CM
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    bool is_press_action<span class="token punctuation">;</span>
    <span class="token class-name">uint8_t</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span> tap<span class="token punctuation">;</span>

<span class="token class-name">uint8_t</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token class-name">uint16_t</span> PROGMEM keymaps<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span>MATRIX_ROWS<span class="token punctuation">]</span><span class="token punctuation">[</span>MATRIX_COLS<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>

<span class="token comment">/* 1 Base layer
 * ,----------------------------------.,-------------.,----------------------------------.
 * |  '   |  ,   |  .   |  p   |  y   || VOL+ | VOL- ||  f   |  g   |  c   |  r   |  l   |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |  a   |  o   |  e   |  u   |  i   || BRI+ | BRI- ||  d   |  h   |  t   |  n   |  s   | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |  ;   |  q   |  j   |  k   |  x   || MREC | MREP ||  b   |  m   |  w   |  v   |  z   |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * | BSP  |  (   |  !   |  -   |  SFT ||  TAB |     SPC      |  =   |  ?   |  )   |  ENT |
 * `----------------------------------'`------'--------------'---------------------------'
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      | ESC  ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * | SFT  | CTL  | OPT  | CMD  |      ||      |      ||      | CMD  | OPT  | CTL  | SFT  |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |  L4  |  L2  ||      |              |  L4  |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 */</span>

<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">LAYOUT_ortho_4x12</span><span class="token punctuation">(</span>
KC_QUOT<span class="token punctuation">,</span> 		KC_COMM<span class="token punctuation">,</span> 	    KC_DOT<span class="token punctuation">,</span> 		KC_P<span class="token punctuation">,</span> 	            <span class="token function">TD</span><span class="token punctuation">(</span>QU<span class="token punctuation">)</span><span class="token punctuation">,</span> 	    <span class="token comment">/**/</span>KC__VOLDOWN<span class="token punctuation">,</span>KC__VOLUP<span class="token punctuation">,</span><span class="token comment">/**/</span>  KC_F<span class="token punctuation">,</span> 		  KC_G<span class="token punctuation">,</span> 	        KC_C<span class="token punctuation">,</span> 		       KC_R<span class="token punctuation">,</span> 	            KC_L<span class="token punctuation">,</span>

<span class="token function">LSFT_T</span><span class="token punctuation">(</span>KC_A<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_O<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_E<span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token function">CMD_T</span><span class="token punctuation">(</span>KC_U<span class="token punctuation">)</span><span class="token punctuation">,</span> 	    KC_I<span class="token punctuation">,</span> 		    <span class="token comment">/**/</span>KC_BRID<span class="token punctuation">,</span>    KC_BRIU<span class="token punctuation">,</span>  <span class="token comment">/**/</span>  KC_D<span class="token punctuation">,</span> 	      <span class="token function">CMD_T</span><span class="token punctuation">(</span>KC_H<span class="token punctuation">)</span><span class="token punctuation">,</span> 	    <span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_T<span class="token punctuation">)</span><span class="token punctuation">,</span> 	   <span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_N<span class="token punctuation">)</span><span class="token punctuation">,</span>	        <span class="token function">RSFT_T</span><span class="token punctuation">(</span>KC_S<span class="token punctuation">)</span><span class="token punctuation">,</span> 

KC_SCLN<span class="token punctuation">,</span> 	    KC_Q<span class="token punctuation">,</span> 			KC_J<span class="token punctuation">,</span> 			KC_K<span class="token punctuation">,</span> 	            KC_X<span class="token punctuation">,</span> 		    <span class="token comment">/**/</span>DM_REC1<span class="token punctuation">,</span>    DM_PLY1<span class="token punctuation">,</span>  <span class="token comment">/**/</span>  KC_B<span class="token punctuation">,</span> 		  KC_M<span class="token punctuation">,</span> 	        KC_W<span class="token punctuation">,</span> 		       KC_V<span class="token punctuation">,</span> 			    KC_Z<span class="token punctuation">,</span>

KC_BSPC<span class="token punctuation">,</span> 	    <span class="token function">LSFT</span><span class="token punctuation">(</span>KC_9<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">LSFT</span><span class="token punctuation">(</span>KC_1<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">LT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> KC_MINS<span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token function">TD</span><span class="token punctuation">(</span>SH<span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token comment">/**/</span>KC_TAB<span class="token punctuation">,</span>    <span class="token function">TD</span><span class="token punctuation">(</span>SP<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token comment">/**/</span>  <span class="token function">TD</span><span class="token punctuation">(</span>SP<span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token function">LT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> KC_EQL<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">LSFT</span><span class="token punctuation">(</span>KC_SLSH<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">LSFT</span><span class="token punctuation">(</span>KC_0<span class="token punctuation">)</span><span class="token punctuation">,</span>          KC_ENT<span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token comment">/*  2 Navigation
 * ,----------------------------------.,-------------.,----------------------------------.
 * | &lt;&lt;&gt;&gt; |  &lt;&lt;  |   ▲  |  &gt;&gt;  |  &lt;-  ||      |      ||      |  7   |  8   |  9   |  *   |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |   ◀︎  |   ▼  |   ▶︎  | CLP  ||      |      ||      |  4   |  5   |  6   |  -   | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |  SS3 |  SS3 |  SS4 |  SS4 |  -&gt;  ||      |      ||  1   |  2   |  3   |  +   |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * | ENT  |      |      |      | **** ||      |    CMD_SP    |  BSP |  0   |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * | SFT  | CTL  | OPT  | CMD  |      ||      |      ||      | CMD  | OPT  | CTL  | SFT  |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      | **** ||      |              |      |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 */</span>

<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">LAYOUT_ortho_4x12</span><span class="token punctuation">(</span>
<span class="token function">A</span><span class="token punctuation">(</span>KC_UP<span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token function">A</span><span class="token punctuation">(</span>KC_LEFT<span class="token punctuation">)</span><span class="token punctuation">,</span>     KC_UP<span class="token punctuation">,</span>          <span class="token function">A</span><span class="token punctuation">(</span>KC_RIGHT<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">LGUI</span><span class="token punctuation">(</span>KC_RBRC<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    KC_COMM<span class="token punctuation">,</span>        KC_7<span class="token punctuation">,</span>           KC_8<span class="token punctuation">,</span> 		    KC_9<span class="token punctuation">,</span> 		    KC_PAST<span class="token punctuation">,</span>

<span class="token function">SFT_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_LEFT<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_DOWN<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">CMD_T</span><span class="token punctuation">(</span>KC_RIGHT<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">LCAG</span><span class="token punctuation">(</span>KC_V<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span> 		<span class="token function">CMD_T</span><span class="token punctuation">(</span>KC_4<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_5<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_6<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">RSFT</span><span class="token punctuation">(</span>KC_PMNS<span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token function">SCMD</span><span class="token punctuation">(</span>KC_3<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">LCAG</span><span class="token punctuation">(</span>KC_3<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">SCMD</span><span class="token punctuation">(</span>KC_4<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">LCAG</span><span class="token punctuation">(</span>KC_4<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token function">LGUI</span><span class="token punctuation">(</span>KC_LBRC<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span> 	    KC_1<span class="token punctuation">,</span>  	        KC_2<span class="token punctuation">,</span> 		    KC_3<span class="token punctuation">,</span> 		    KC_PPLS<span class="token punctuation">,</span>

KC_ENT<span class="token punctuation">,</span>         _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>		<span class="token comment">/**/</span><span class="token function">LGUI</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">LGUI</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">LGUI</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">,</span> 	KC_BSPC<span class="token punctuation">,</span>  	    KC_0<span class="token punctuation">,</span> 		    _______<span class="token punctuation">,</span> 		KC_ENT<span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token comment">/*  3 Commands
 * ,----------------------------------.,-------------.,----------------------------------.
 * |   1  |   2  |   3  |   4  |   5  ||  L5  |      ||   6  |   7  |   8  |   9  |   0  |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      |      ||      |     ****     |      |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * | SFT  | CTL  | OPT  |      |      ||      |      ||      |      | OPT  | CTL  | SFT  |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      |      ||      |     ****     |      |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 */</span>

<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">LAYOUT_ortho_4x12</span><span class="token punctuation">(</span>
KC_1<span class="token punctuation">,</span> 	        KC_2<span class="token punctuation">,</span> 	        KC_3<span class="token punctuation">,</span> 		    KC_4<span class="token punctuation">,</span> 		    KC_5<span class="token punctuation">,</span> 		    <span class="token comment">/**/</span><span class="token function">LT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   KC_NO<span class="token punctuation">,</span>  <span class="token comment">/**/</span>    KC_6<span class="token punctuation">,</span> 		    KC_7<span class="token punctuation">,</span> 			KC_8<span class="token punctuation">,</span> 		    KC_9<span class="token punctuation">,</span> 		    KC_0<span class="token punctuation">,</span>

<span class="token function">SFT_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>	_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span> 	    <span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>	<span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   <span class="token function">SFT_T</span><span class="token punctuation">(</span>KC_NO<span class="token punctuation">)</span><span class="token punctuation">,</span>   _______<span class="token punctuation">,</span> 
    
_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>         _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>

<span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">,</span> 	_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>         _______<span class="token punctuation">,</span>        _______<span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token comment">/*  4 Mouse and Keypad
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |  7   |  8   |  9   |  *   ||      |      ||      |  ∆   |  ^   |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |  .   |  4   |  5   |  6   |  -   ||      |      ||  ○   |  &lt;   |  v   |  &gt;   |  ●   | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |  ,   |  1   |  2   |  3   |  +   ||      |      ||      |  ∇   |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |  0   |  .   | **** |      ||      |      ○       | **** |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      |      ||      |      ||      |  ∆   |  ^   |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * | SFT  | CTL  | OPT  | CMD  |      ||      |      ||  ○   |  &lt;   |  v   |  &gt;   |  ●   |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |  ∇   |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      |      ||      |      ○       | **** |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 */</span>

<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">LAYOUT_ortho_4x12</span><span class="token punctuation">(</span>
KC_NO<span class="token punctuation">,</span> 	        KC_7<span class="token punctuation">,</span> 		    KC_8<span class="token punctuation">,</span> 		    KC_9<span class="token punctuation">,</span> 		    KC_PAST<span class="token punctuation">,</span> 	    <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span> 		KC_WH_D<span class="token punctuation">,</span> 	    KC_MS_U<span class="token punctuation">,</span> 	    _______<span class="token punctuation">,</span> 		_______<span class="token punctuation">,</span>

<span class="token function">SFT_T</span><span class="token punctuation">(</span>KC_DOT<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token function">CTL_T</span><span class="token punctuation">(</span>KC_4<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token function">OPT_T</span><span class="token punctuation">(</span>KC_5<span class="token punctuation">)</span><span class="token punctuation">,</span> 	<span class="token function">CMD_T</span><span class="token punctuation">(</span>KC_6<span class="token punctuation">)</span><span class="token punctuation">,</span>    KC_PMNS<span class="token punctuation">,</span> 	    <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    KC_BTN1<span class="token punctuation">,</span> 	    KC_MS_L<span class="token punctuation">,</span> 	    KC_MS_D<span class="token punctuation">,</span> 	    KC_MS_R<span class="token punctuation">,</span> 	    KC_BTN2<span class="token punctuation">,</span>

KC_COMM<span class="token punctuation">,</span> 	    KC_1<span class="token punctuation">,</span> 		    KC_2<span class="token punctuation">,</span> 		    KC_3<span class="token punctuation">,</span> 		    KC_PPLS<span class="token punctuation">,</span>  	    <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        KC_WH_U<span class="token punctuation">,</span> 	    _______<span class="token punctuation">,</span> 		_______<span class="token punctuation">,</span> 		_______<span class="token punctuation">,</span>

_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        KC_0<span class="token punctuation">,</span>           KC_DOT<span class="token punctuation">,</span>         KC_SPC<span class="token punctuation">,</span>         <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    KC_BTN1<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">)</span><span class="token punctuation">,</span>

<span class="token comment">/*  Commands
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      |      || **** | RSET ||      |      |      |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      |      ||      |              |      |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 * ,----------------------------------.,-------------.,----------------------------------.
 * |      |      |      |      |      || **** |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      | 
 * |------+------+------+------+------||------+------||------+------+------+------+------|
 * |      |      |      |      |      ||      |      ||      |      |      |      |      |
 * |------+------+------+------+------||------+------''------.------+------+------+------|
 * |      |      |      |      |      ||      |              |      |      |      |      |
 * `----------------------------------'`------'--------------'---------------------------'
 */</span>

<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">LAYOUT_ortho_4x12</span><span class="token punctuation">(</span>
_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        RESET<span class="token punctuation">,</span>  <span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>

_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>

_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>

_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        <span class="token comment">/**/</span>_______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span><span class="token comment">/**/</span>    _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">,</span>        _______<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// custom tapping terms</span>

<span class="token class-name">uint16_t</span> <span class="token function">get_tapping_term</span><span class="token punctuation">(</span><span class="token class-name">uint16_t</span> keycode<span class="token punctuation">,</span> <span class="token class-name">keyrecord_t</span> <span class="token operator">*</span>record<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>keycode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token function">LT</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span>KC_BSPC<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token keyword">return</span> TAPPING_TERM <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token function">TD</span><span class="token punctuation">(</span>SP<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token number">110</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token function">TD</span><span class="token punctuation">(</span>SH<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token number">110</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token function">TD</span><span class="token punctuation">(</span>QU<span class="token punctuation">)</span><span class="token operator">:</span>
            <span class="token keyword">return</span> <span class="token number">110</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token keyword">return</span> TAPPING_TERM<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// tap dance scenarios</span>

<span class="token class-name">uint8_t</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>count <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>interrupted <span class="token operator">||</span> <span class="token operator">!</span>state<span class="token operator">-&gt;</span>pressed<span class="token punctuation">)</span> <span class="token keyword">return</span> SINGLE_TAP<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> SINGLE_HOLD<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>count <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>interrupted<span class="token punctuation">)</span> <span class="token keyword">return</span> DOUBLE_SINGLE_TAP<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>pressed<span class="token punctuation">)</span> <span class="token keyword">return</span> DOUBLE_HOLD<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> DOUBLE_TAP<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>count <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token operator">-&gt;</span>interrupted <span class="token operator">||</span> <span class="token operator">!</span>state<span class="token operator">-&gt;</span>pressed<span class="token punctuation">)</span> <span class="token keyword">return</span> TRIPLE_TAP<span class="token punctuation">;</span>
        <span class="token keyword">else</span> <span class="token keyword">return</span> TRIPLE_HOLD<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">return</span> <span class="token number">8</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// tap instances</span>

<span class="token keyword">static</span> tap SHtap_state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>is_press_action <span class="token operator">=</span> true<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> tap SPtap_state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>is_press_action <span class="token operator">=</span> true<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> tap QUtap_state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>is_press_action <span class="token operator">=</span> true<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> tap CMtap_state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span>is_press_action <span class="token operator">=</span> true<span class="token punctuation">,</span>
    <span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// SF;L2</span>

<span class="token keyword">void</span> <span class="token function">SH_finished</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    SHtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>SHtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">set_oneshot_mods</span><span class="token punctuation">(</span><span class="token function">MOD_BIT</span><span class="token punctuation">(</span>KC_LSFT<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">layer_on</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">SH_reset</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>SHtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">layer_off</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    SHtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// SH;L3</span>

<span class="token keyword">void</span> <span class="token function">SP_finished</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    SPtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>SPtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">layer_on</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_LCMD<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> DOUBLE_TAP<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">SP_reset</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>SPtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_SPC<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">layer_off</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_LCMD<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> DOUBLE_TAP<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_0<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    SPtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// y;esc</span>

<span class="token keyword">void</span> <span class="token function">QU_finished</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QUtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>QUtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_Y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_ESC<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">QU_reset</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>QUtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_Y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_ESC<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    QUtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// comm;tab</span>

<span class="token keyword">void</span> <span class="token function">CM_finished</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    QUtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token function">cur_dance</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>QUtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_COMM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">register_code</span><span class="token punctuation">(</span>KC_TAB<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">CM_reset</span><span class="token punctuation">(</span><span class="token class-name">qk_tap_dance_state_t</span> <span class="token operator">*</span>state<span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token operator">*</span>user_data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>QUtap_state<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> SINGLE_TAP<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_COMM<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> SINGLE_HOLD<span class="token operator">:</span> <span class="token function">unregister_code</span><span class="token punctuation">(</span>KC_TAB<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    CMtap_state<span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">qk_tap_dance_action_t</span> tap_dance_actions<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>SH<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ACTION_TAP_DANCE_FN_ADVANCED</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> SH_finished<span class="token punctuation">,</span> SH_reset<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>SP<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ACTION_TAP_DANCE_FN_ADVANCED</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> SP_finished<span class="token punctuation">,</span> SP_reset<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>QU<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ACTION_TAP_DANCE_FN_ADVANCED</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> QU_finished<span class="token punctuation">,</span> QU_reset<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>CM<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">ACTION_TAP_DANCE_FN_ADVANCED</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">,</span> CM_finished<span class="token punctuation">,</span> CM_reset<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token class-name">uint8_t</span> RGBLED_RAINBOW_SWIRL_INTERVALS<span class="token punctuation">[</span><span class="token punctuation">]</span> PROGMEM <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ae3c42d8.js" defer></script><script src="/assets/js/2.4a530985.js" defer></script><script src="/assets/js/15.b6da1766.js" defer></script>
  </body>
</html>
